name: "Proxy API"
description: "Example of proxying requests to external services"

server:
  host: "0.0.0.0"
  port: 3010

dashboard:
  enabled: true
  port: 3011

mode: "proxy"

endpoints:
  github:
    path: "/github/*path"
    methods: ["GET", "POST"]
    mode: proxy
    proxy:
      target: "https://api.github.com"
      strip_prefix: "/github"
      timeout: 30
      headers:
        User-Agent: "Backworks-Proxy/1.0"
      load_balancing:
        algorithm: RoundRobin
      
  httpbin:
    path: "/httpbin/*path"
    methods: ["GET", "POST", "PUT", "DELETE"]
    mode: proxy
    proxy:
      targets:
        - name: "primary"
          url: "https://httpbin.org"
          weight: 0.7
          retry_attempts: 3
          health_check:
            path: "/status/200"
            interval: {secs: 30, nanos: 0}
            timeout: {secs: 5, nanos: 0}
            healthy_threshold: 2
            unhealthy_threshold: 3
        - name: "backup" 
          url: "https://httpbingo.org"
          weight: 0.3
          retry_attempts: 2
      strip_prefix: "/httpbin"
      load_balancing:
        algorithm: Weighted
      capture:
        enabled: true
        analyze: true
        learn_schema: true
