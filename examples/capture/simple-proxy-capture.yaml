# Simple proxy-based capture example
name: simple-proxy-capture
version: 1.0.0

# Use proxy mode to capture real API traffic
mode: proxy

server:
  port: 8080
  host: "0.0.0.0"

endpoints:
  # Capture all API calls while proxying to real server
  main_api:
    path: "/*"
    method: "*"
    mode: proxy
    proxy:
      target: "http://localhost:3000"  # Your real API server
      timeout: 30
      # Integrated capture functionality
      capture:
        enabled: true
        auto_start: true
        storage_path: "./captures/proxy"
        session_name: "proxy_capture"
        # Filter what to capture
        include_patterns:
          - "/api/*"
          - "/v1/*"
        exclude_patterns:
          - "/health"
          - "/metrics"
          - "*.css"
          - "*.js"
        methods:
          - "GET"
          - "POST"
          - "PUT"
          - "DELETE"
          - "PATCH"

# Optional: Export captured data as mock endpoints
# Run: backworks generate captures/proxy/session.json config/generated-mocks.yaml
